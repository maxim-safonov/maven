# ТЗ2


![Java CI with Maven](https://github.com/maxim-safonov/maven/actions/workflows/maven.yml/badge.svg)

## Описание проекта
Данная программа среди чисел из файла (integer) позволяет находить минимум, максимум, сумму, произведение и проверять, правильно ли они найдены. Также на Github Actions развернута тестирующая система, котроая запускает тесты и отправляет статус прохождения тестов в Telegram.

## Функционал программы
Программа позволяет находить минимум и максимум, среди значений в файле input.txt. Результат работы - число (long). Также позволяет находить сумму и произведение. Результат работы - число (long). Для умножения и деления написаны exception в случае выхода за границу. Более того, по критериям, для реализации для реализации 1го любого дополнительного теста была прописана функция поиска среднего значения. Результат работы - число (double). Все функции оформлены в классе UserService, который лежит в папке сom.test, которая лежит в main. Каждая функция реализована через цикл for, который выполняется за o(n). Данные для всех вышеперечисленных функций берутся из файла input.txt, который находится в файле с проектом. С помощью BufferedReader программа считывает числа из файла, после чего числа "сплитятся" по пробелу и приводятся к типу данных long через Long.parseLong(). Каждая функция возвращает двумерный массив. По индексу 0 лежит ответ, по индексу 1 лежит время выполнения (в наносекундах) конкретной функции. Время замеряется через System.nanoTime(). Идет замеряе времени до и времени после выполнения. Время работы функции - разность этих чисел. 

## Описание тестов
Перейдем к тестам. Все тесты написаны в классе TestLauncherTest. Каждый тест тестирует ровно 1 функцию. Перед каждым тестом идет воответствующая аннотация @Test: так программа понимает, что перед ней функция, которую придется тестировать. В теле каждого теста создается объект класса UserService. Внутри assertEquals сравнивается результат работы нтересующий функции с предполагаемым ответом. Если они совпадают, то тест считается выполненным. Если нет, то после запуска программы покажет, какой именно тест не был пройден. Последним реализован специально падающий тест через Thread.sleep(300). 

## Ввод и вывод 
Давайте рассмотрим пример работы тестов. В файлике input.txt находятся следующие числа: 1 2 3 4 5.
1) Открываем Intellij Idea, переходим в файлик TestLauncherTest
2) В каждом тесте в assertEquals подставляем ожидаемый результат. Если мы хотим, чтобы все тесты прошли, мы ставим test_max значение 5. В test_summ - 15. В test_min - 1. В test_mult - 120. В test_sr - 3.0. Если мы хотим, чтобы какой-то тест не прошел, то выбираем такую функцию и в ней меняем ожидаемое значение на любое другое
3) Запускаем класс TestLauncherTest, выбрав предварительно запуск всего файла (Current File)
4) После этого последовательно начинают запускаться 5 тестов
5) Внизу будет показан результат работы (Зеленое - значит тест прошел. Красное - тест не пройден). Также будет видны времена работы каждого теста. Первое число - результат работы test_summ, второе - test_max, третье - test_min, четвертое - test_mult, пятое - test_sr.

## Время работы в зависимости от количества данных в файле 
Тесты реагируют на изменение количество чисел в input.txt. Покажем это на графике. Будем изменять количество чисел от 5 до 10000. Ассимптотика метода О(n), так как сумма считается циклом for, который пробегает файл за линию. 

![Image alt](https://github.com/maxim-safonov/maven/blob/main/2024-05-26%2021.37.00.jpg)

## Описание CI системы. Работа с Github Actions в репозитории
При любом коммите тесты запускаются автоматически в GitHub Actions, которые проверят корректность работы программы. Также их можно запустить вручную через Actions - Java CI, в строке "This workflow has a workflow_dispatch event trigger" нужно выбрать "Run workflow". Также в README.md сверху прикреплен бейдж, в котором отображается статус прохождения тестов.

## Telegram бот
В нижней части maven.yml прописана привязка Telegram bot @maven_tz2_bot, который посылает уведомления о коммитах. Если все тесты пройдены, то он присылает фразу "все ок", если нет, то "Тесты провалены". Подключить к боту можно через Telegram ID. 

